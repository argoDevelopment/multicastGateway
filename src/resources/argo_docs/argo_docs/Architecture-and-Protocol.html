<!DOCTYPE html>
<html lang="en">
<html>
  <head>

 <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Overview of the protocol, architecture and components of Argo">
<meta name="keywords" content="plugin,  plugins">
<title>Argo Architecture and Protocol  | Argo Runtime Service Discovery</title>
<link rel="stylesheet" type="text/css" href="../css/syntax.css">
<link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">-->
<link rel="stylesheet" type="text/css" href="../css/modern-business.css">
<link rel="stylesheet" type="text/css" href="../css/lavish-bootstrap.css">
<link rel="stylesheet" type="text/css" href="../css/customstyles.css">
<link rel="stylesheet" type="text/css" href="../css/theme-blue.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="../js/jquery.navgoco.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="../js/toc.js"></script>
<script src="../js/customscripts.js"></script>
<link rel="shortcut icon" href="../common_images/favicon.ico" type="image/x-icon">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->







 

<script>
  $(function () {
      $('[data-toggle="tooltip"]').tooltip()
  })
</script>



  </head>

<body>

   <!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="fa fa-home fa-lg navbar-brand" href="home.html">&nbsp;<span class="projectTitle"> Argo Runtime Service Discovery</span></a>

        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                

                
                    
                        
                            <li><a href="https://github.com/di2e/Argo" target="_blank">Github Repo</a></li>
                        
                    
                


                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                <li class="dropdown">
                    
                        
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                
                                    
                                        <li><a href="https://talk.jekyllrb.com" target="_blank">Jekyll Talk</a></li>
                                    
                                
                                    
                                        <li><a href="http://jekyllrb.com/docs/home/" target="_blank">Jekyll documentation</a></li>
                                    
                                
                                    
                                        <li><a href="http://stackoverflow.com/questions/tagged/jekyll" target="_blank">Jekyll on Stack Overflow</a></li>
                                    
                                
                                    
                                        <li><a href="http://idratherbewriting.com/category-jekyll/" target="_blank">Jekyll on my blog</a></li>
                                    
                                
                            </ul>
                        
                    
                </li>


                <!-- special insertion -->

               
                <!-- Send feedback function -->
<script>
function SendLinkByMail(href) {
var subject= "Argo Runtime Service Discovery feedback";
var body = "I have some feedback about the Argo Architecture and Protocol page: ";
body += window.location.href;
body += "";
var uri = "mailto:argodevelopment@gmail.com?subject=";
uri += encodeURIComponent(subject);
uri += "&body=";
uri += encodeURIComponent(body);
window.location.href = uri;
}
</script>

<li><a href="javascript:(function()%7BSendLinkByMail()%3B%7D)()%3B" target="_blank"><i class="fa fa-envelope-o"></i> Feedback</a></li>


                <li>
                    <!-- start search -->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="../js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                        SimpleJekyllSearch.init({
                            searchInput: document.getElementById('search-input'),
                            resultsContainer: document.getElementById('results-container'),
                            dataSource: '../search.json',
                            searchResultTemplate: '<li><a href="{url}" title="Argo Architecture and Protocol">{title}</a></li>',
                        noResultsText: 'No results found.',
                                limit: 10,
                                fuzzy: true,
                        })
                    </script>
                    <!-- end search -->
                </li>
            
        </div>
        <!-- /.container -->
</nav>


    <!-- Page Content -->
    <div class="container">
        <div class="col-lg-12">&nbsp;</div>


    <!-- Content Row -->
<div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">

        <script>

            $(document).ready(function() {
                // Initialize navgoco with default options
                $("#mysidebar").navgoco({
                    caretHtml: '',
                    accordion: false,
                    openClass: 'active', // open
                    save: false, // leave false or nav highlighting doesn't work right
                    cookie: {
                        name: 'navgoco',
                        expires: false,
                        path: '/'
                    },
                    slide: {
                        duration: 200,
                        easing: 'linear'
                    }
                });

                $("#collapseAll").click(function(e) {
                    e.preventDefault();
                    $("#mysidebar").navgoco('toggle', false);
                });

                $("#expandAll").click(function(e) {
                    e.preventDefault();
                    $("#mysidebar").navgoco('toggle', true);
                });

            });

        </script>


        <ul id="mysidebar" class="nav">


            <span class="siteTagline"><img style="width: 100%" src="../argo_docs/images/main_logo.png"/> </span>
            <span class="siteTagline"></span>
            <span class="versionTagline">Version 0.4.1</span>

            


            
                
                    
                
                    
                        <li><a href="#">Overview</a>
                            <ul>
                                
                                    
                                        
                                            <li><a href="../argo_docs/home.html">Home</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Up-and-running-in-5-minutes.html">Up and Running in 5 Minutes</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Why-Argo-and-not-some-other-SLP.html">Why Argo and not some other SLP?</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/FAQ.html">FAQ</a></li>
                                        
                                    

                                    

                                
                            </ul>
                        </li>
                    
                
                    
                        <li><a href="#">What is Argo?</a>
                            <ul>
                                
                                    
                                        
                                            <li><a href="../argo_docs/home.html#what-is-runtime-service-discovery">What is Runtime Service Discovery</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Argo-Primary-Use-cases.html">Primary Use-Cases</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Argo-Flexible-Architecture.html">Flexible Architecture</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Argo-Roadmap.html">Roadmap</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Argo-Security.html">Security</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Controlling-the-distance-a-probe-can-travel.html">Controlling the "distance" a probe can travel</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Multicast-Plan.html">Multicast Plan</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Argo-Firewall-Changes.html">Firewall Changes</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Argo-Browser-Client-Application.html">Argo Service Browser</a></li>
                                        
                                    

                                    

                                
                            </ul>
                        </li>
                    
                
                    
                        <li><a href="#">Protocol</a>
                            <ul>
                                
                                    
                                        
                                            <li><a href="../argo_docs/Argo-Probe-Format.html">Argo Probe Format</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Service-Record-Examples.html">Service Record Examples</a></li>
                                        
                                    

                                    

                                
                                    
                                        
                                            <li><a href="../argo_docs/Argo-Response-Format.html">Argo Response Format</a></li>
                                        
                                    

                                    

                                
                            </ul>
                        </li>
                    
                
                    
                        <li><a href="#">Architecture</a>
                            <ul>
                                
                                    
                                     <li class="active"><a href="../argo_docs/Architecture-and-Protocol.html">Architecture and Protocol</a></li>
                                    

                                    

                                
                            </ul>
                        </li>
                    
                
                    
                        <li><a href="#">Components</a>
                            <ul>
                                
                                    
                                        
                                            <li><a href="../argo_docs/tag_getting_started.html">Components Overview</a></li>
                                        
                                    

                                    
                                        <li class="thirdlevel"><a href="#">Responder</a>
                                            <ul>
                                                
                                                    
                                                        <li><a href="../argo_docs/tag_getting_started.html">Installation</a></li>
                                                    

                                                
                                                    
                                                        <li><a href="../argo_docs/tag_formatting.html">Configuration</a></li>
                                                    

                                                
                                                    
                                                        <li><a href="../argo_docs/Argo-Responder-no_browser-mode.html">Responder no_browser mode</a></li>
                                                    

                                                
                                                    
                                                        <li><a href="../argo_docs/Argo-Responder-Out-of-the-box-plugins.html">Responder Out-of-the-box plugins</a></li>
                                                    

                                                
                                                    
                                                        <li><a href="../argo_docs/Argo-Responder-Plugin-Architecture.md">Responder Plugin Architecure</a></li>
                                                    

                                                
                                            </ul>
                                        </li>
                                    

                                
                            </ul>
                        </li>
                    
                
            


                 <!--if you aren't using the accordion, uncomment this block:-->
                <style>
                    .center { margin: auto; width: 80%; }
                </style>
                <div class="center">
                     <p align=center class="external">
                         <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
                     </p>
                </div>


                <!--<div>-->
                    <!--<form style="border:1px solid #ccc;padding:3px;text-align:center;"-->
                          <!--action="https://tinyletter.com/argodiscovery" method="post" target="popupwindow"-->
                          <!--onsubmit="window.open('https://tinyletter.com/argodiscovery', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">-->
                        <!--<p>-->
                            <!--<label for="tlemail">Enter your email address</label>-->
                        <!--</p>-->
                        <!--<p>-->
                            <!--<input type="text" style="width:140px" name="email" id="tlemail"/>-->
                        <!--</p>-->
                        <!--<input type="hidden" value="1" name="embed"/>-->
                        <!--<input type="submit" value="Subscribe"/>-->
                        <!--<p>-->
                            <!--<a href="https://tinyletter.com" target="_blank">powered by TinyLetter</a>-->
                        <!--</p>-->
                    <!--</form>-->
                <!--</div>-->
    </div>
    <!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
    <script>$("li.active").parents('li').toggleClass("active");</script>
    


         


            <!-- Content Column -->
            <div class="col-md-9">

                <div class="post-header">
   <h1 class="post-title-main">Argo Architecture and Protocol</h1>
</div>

<div class="post-content">

   
    <div class="summary">Overview of the protocol, architecture and components of Argo</div>
   

<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>


<div id="toc"></div>


    

  <h2 id="argo-component-anatomy">Argo Component Anatomy</h2>

<p>There are three main components in the Argo Protocol.</p>

<ol>
<li>The Probe Generator that is likely embedded in a service client application.</li>
<li>The Responder which may be a daemon on a host or embedded in some service container (e.g. OSGi).</li>
<li>The Response Listener which, by protocol should listen asynchronously to replies from client probes.</li>
</ol>

<p>These components provide the fundamental protocol components, however, there are no prescribed protocol requirements on the implementation of the client or the response listener.  The Responder has prescribed normative behavior.</p>

<p><img style="height:400px;" src="images/d995097a-ce1c-11e4-8dcb-e5f2fb0a86dc.png"/></p>

<p>The Argo component architecture and deployment possibilities are pretty flexible.  Read more on that <a href="Argo-Flexible-Architecture">here</a>.</p>

<h2 id="simple-probe-response-protocol">Simple probe/response protocol.</h2>

<ul>
<li>Multiple Pub/Sub mediums can send a probe.  For example: Multicast, JMS, MQTT, Amazon SNS.</li>
<li>Unicast TCP response.  Responses are sent via HTTP(S).</li>
<li>No WAN announce/goodbye protocol included.</li>
<li>Clients need to listen for responses asynchronously.</li>
<li>Unicast responses for scalability and security as opposed to multicast responses.</li>
<li>The probe payloads are in XML.</li>
</ul>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;probe</span> <span class="na">id=</span><span class="s">&quot;urn:uuid:7ea60f23-7072-4113-aff8-194f906d83d1&quot;</span> <span class="na">contractID=</span><span class="s">&quot;urn:uuid:55f1fecc-bfed-4be0-926b-b36a138a9943&quot;</span><span class="nt">&gt;</span>     
    <span class="nt">&lt;respondTo&gt;</span>http://7.7.7.12:8181/services/probeResponse<span class="nt">&lt;/respondTo&gt;</span>
    <span class="nt">&lt;respondToPayloadType&gt;</span>XML or JSON<span class="nt">&lt;/respondToPayloadType&gt;</span>
    <span class="nt">&lt;serviceContractID&gt;</span>uuid:03d55093-a954-4667-b682-8116c417925d<span class="nt">&lt;/serviceContractID&gt;</span>
<span class="nt">&lt;/probe&gt;</span>
</code></pre></div>
<p>A probe can list multiple serviceContractID elements if they want to probe for several service types in one probe.  For example:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;probe</span> <span class="na">id=</span><span class="s">&quot;urn:uuid:7ea60f23-7072-4113-aff8-194f906d83d1&quot;</span> <span class="na">contractID=</span><span class="s">&quot;urn:uuid:55f1fecc-bfed-4be0-926b-b36a138a9943&quot;</span><span class="nt">&gt;</span>     
    <span class="nt">&lt;respondTo&gt;</span>http://7.7.7.12:8181/services/probeResponse<span class="nt">&lt;/respondTo&gt;</span>
    <span class="nt">&lt;respondToPayloadType&gt;</span>XML or JSON<span class="nt">&lt;/respondToPayloadType&gt;</span>
    <span class="nt">&lt;serviceContractID&gt;</span>uuid:03d55093-a954-4667-b682-8116c417925d<span class="nt">&lt;/serviceContractID&gt;</span>
    <span class="nt">&lt;serviceContractID&gt;</span>uuid:6f371517-4bba-489e-b733-b2230194811d<span class="nt">&lt;/serviceContractID&gt;</span>
    <span class="nt">&lt;serviceContractID&gt;</span>uuid:140aad15-dcf8-42d2-9f1f-85ad605fb3e4<span class="nt">&lt;/serviceContractID&gt;</span>
<span class="nt">&lt;/probe&gt;</span>
</code></pre></div>
<p>Clients are supported by a jar file for Probe generation.  Probe generation should be very simple for the client.  A probe specifies which service types it&#39;s interested in by listing the individual service contract IDs in the probe.  A probe with no contract ID connotes a “select all” - which return ALL services in the reachable network.  So be careful with that one.  But it could be useful for “Service Situational Awareness/monitoring” and other such cool Run-time Service Discovery use-cases we haven’t thought of yet.</p>

<p>Response payloads are in XML or JSON are are described in detail here.  However, here is a XML example of a response payload.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
    <span class="nt">&lt;services</span> <span class="na">responseID=</span><span class="s">”the</span> <span class="err">unique</span> <span class="err">response</span> <span class="err">ID”</span> <span class="na">probeID=</span><span class="s">”the</span> <span class="err">probeID</span> <span class="err">that</span> <span class="err">instigated</span> <span class="err">this</span> <span class="err">response”</span><span class="nt">&gt;</span>
    <span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;the unique ID of the service instance” contractID=&quot;</span><span class="err">the</span> <span class="err">contract</span> <span class="err">ID</span> <span class="err">that</span> <span class="err">will</span> <span class="err">match</span> <span class="err">the</span> <span class="err">probe&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ipAddress&gt;</span>Some IP Address<span class="nt">&lt;/ipAddress&gt;</span>
        <span class="nt">&lt;port&gt;</span>some port<span class="nt">&lt;/port&gt;</span>
        <span class="nt">&lt;url&gt;</span>some URL to a REST/SOAP or other access location<span class="nt">&lt;/url&gt;</span>
        <span class="nt">&lt;description&gt;</span>The human readable description<span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;serviceName&gt;</span>The human readable short name of the service<span class="nt">&lt;/serviceName&gt;</span>
        <span class="nt">&lt;contractDescription&gt;</span>human readable desc of the contract<span class="nt">&lt;/contractDescription&gt;</span>
        <span class="nt">&lt;data&gt;</span><span class="cp">&lt;![CDATA[This is some CDATA text]]&gt;</span><span class="nt">&lt;/data&gt;</span>
        <span class="nt">&lt;ttl&gt;</span>expected valid lifetime of this response<span class="nt">&lt;/ttl&gt;</span>
        <span class="nt">&lt;consumability&gt;</span>HUMAN_CONSUMABLE or MACHINE_CONSUMABLE <span class="nt">&lt;/consumability&gt;</span>
    <span class="nt">&lt;/service&gt;</span>

    … more service …

  <span class="nt">&lt;/services&gt;</span>
</code></pre></div>
<p><strong>Asynchronous Response Listeners</strong> should are supported by an “out of the box” component but can be easily custom built.  There are two clients for a Listener.  The Responder sends response payloads to a Listener via the URL provided in the &quot;respondTo&quot; probe payload.  Also the client application retrieves received responds from the Listener.  Both Listener APIs are REST services (but the client facing API could be a direct Java call).  </p>

<p><strong>Asynchronous Response Listeners</strong> should be deployed on a small device if possible.  They also need to be multi-threaded inbound REST service containers - small JAX-RS containers or basic HTTP servers come to mind. Further, Asynchronous Response Listeners do not have to be deployed on the same machine as the effective service client.  In fact, for certain cybersecurity reasons, the Asynchronous Response Listeners probably should be deployed on a separate machine, unless that is impractical - for example the client and the listener need to be installed on a mobile device.</p>

<p><strong>The Responder</strong> is “extensible” via custom “plug-ins” for handling probes.  Currently, the &quot;out of the box&quot; plug-in probe handler includes the Config File but could easily be extended to include plug-ins for, UDDI (maybe), Apigee, Layer 7, Netflix eureka, and your Simple Registry.  Next generation of plugins might include adaptors for local-link protocols such as mDNS/Bonjour, SLP and other domain-specific protocols such as ServiceNow, Hadoop ZooKeeper/Curator, Serif, dozerd, etcd and others.</p>

<p><strong>Responders</strong> need to deal with multiple probes with the same ID - process the first and drop the rest - time-spread UDP packets with identical payloads help reliability.  Responders will need to perform multi-threaded handling of inbound UDP packets for obvious reasons.  Responder plug-ins should be shielded from multicast handling and response payload generation/sending as much as possible.</p>


<div class="tags">
    
    
    <b>Tags: </b>
    








    
    
    <a href="tag_plugin.html" class="btn btn-default navbar-btn cursorNorm" role="button">plugin</a>
    
    
    
</div>



</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2016 Argo. All rights reserved. <br />
<p>Page last updated:</span> November 30, 2015<br/> Site last generated: Feb 12, 2016 <br />
<p><img src="../common_images/company_logo.png/></p>
                </div>
            </div>
</footer>
            </div><!-- /.row -->

    </div>    <!-- /.container -->

</body>


</html>

